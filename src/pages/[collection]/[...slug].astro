---
import { getCollection } from 'astro:content';
import { collections } from '../../content/config';
import { getPath } from '../../utils/path';
import DocsLayout from '../../layouts/DocsLayout.astro';
import type { GenericCollectionEntry } from '../../utils/sidebar';
import type { CollectionKey } from 'astro:content';

interface Props {
    entry: GenericCollectionEntry
}

export async function getStaticPaths() {
    const paths = [];
    for (const collection of Object.keys(collections)) {
        const entries = await getCollection(collection as CollectionKey);
        for (const entry of entries) {
            const slug = entry.slug;
            // if (slug == "index") {
            //     paths.push(getPath({ collection, entry }));
            // }
            paths.push(getPath({ collection, entry, slug }));
        }
    }
    return paths;
}

const { entry } = Astro.props;
const { Content, headings } = await entry.render();
---
<DocsLayout entry={entry} headings={headings}>
    <Content />
</DocsLayout>
